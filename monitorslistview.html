<!DOCTYPE html>

<body id="monitorlistview">
    <style type="text/css">
		.monitorBox {

			background-color: grey;
			margin: auto;
			width: 50%;
            height:auto;
			padding: 20px;
            margin-top: -100px;
		}
	</style>

    <div id="monitorviews"></div>

    <script src="./jquery/\jquery.min.js"></script>
    <script src="./jquery/jquery-migrate.min.js"></script>
    <script>
        
        $(document).ready(function() {
            loadXMLDoc();
        });

        function loadXMLDoc() {
            var xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == XMLHttpRequest.DONE) { // XMLHttpRequest.DONE == 4
                if (xmlhttp.status == 200) {
                    var object=xmlhttp.responseText   
                    res = JSON.parse(`${xmlhttp.responseText}`)
                    console.log(res)

                    res.monitors.forEach(function(monitor){
                        var content = document.getElementById("monitorviews").innerHTML 
                        var url = `monitorView.php?name=${monitor.monitors_name}&url=${monitor.monitors_url}`
                        document.getElementById("monitorviews").innerHTML += `<object type="text/html" style="width: 100%; height:100%" data="${url}" ></object>`;
                    })



                }
                else if (xmlhttp.status == 400) {
                    alert('There was an error 400');
                }
                else {
                    alert('something else other than 200 was returned');
                }
                }
            };

            xmlhttp.open("GET", "getmonitors.php", true);
            xmlhttp.send();
        }

    </script>

</body>